<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Lista Produse</title>
</head>
<body>

<h1>Produse</h1>

<!-- MESSAGES -->
<div th:if="${errorMessage}" style="color:red;font-weight:bold;">
    <p th:text="${errorMessage}"></p>
</div>

<div th:if="${successMessage}" style="color:green;font-weight:bold;">
    <p th:text="${successMessage}"></p>
</div>

<a th:href="@{/products/new}">â• AdaugÄƒ produs</a>
<br><br>

<!-- FILTER + SORT -->
<form th:action="@{/products}" method="get">

    <fieldset style="padding:10px;">
        <legend><strong>Filtrare</strong></legend>

        Nume:
        <input type="text" name="name" th:value="${name}"/>

        Categorie:
        <input type="text" name="category" th:value="${category}"/>

        Ãn stoc:
        <select name="inStock">
            <option value="">-- Toate --</option>
            <option value="true" th:selected="${inStock == true}">Da</option>
        </select>
    </fieldset>

    <br>

    <fieldset style="padding:10px;">
        <legend><strong>Sortare</strong></legend>

        SorteazÄƒ dupÄƒ:
        <select name="sortBy">
            <option value="id" th:selected="${sortBy == 'id'}">ID</option>
            <option value="name" th:selected="${sortBy == 'name'}">Nume</option>
            <option value="value" th:selected="${sortBy == 'value'}">Valoare</option>
            <option value="stock" th:selected="${sortBy == 'stock'}">Stoc</option>
        </select>

        DirecÈ›ie:
        <select name="direction">
            <option value="asc" th:selected="${direction == 'asc'}">Ascendent</option>
            <option value="desc" th:selected="${direction == 'desc'}">Descendent</option>
        </select>
    </fieldset>

    <br>

    <button type="submit">ğŸ” AplicÄƒ</button>
    <a th:href="@{/products}">Reset</a>
</form>

<br>

<!-- TABLE -->
<table border="1" cellpadding="6" cellspacing="0" style="border-collapse:collapse;">
    <thead style="background:#f0f0f0;">
    <tr>
        <th>ID</th>
        <th>Nume</th>
        <th>Categorie</th>
        <th>Valoare</th>
        <th>Stoc</th>
        <th>Status stoc</th>
        <th>AcÈ›iuni</th>
    </tr>
    </thead>

    <tbody>
    <tr th:each="p : ${products}">
        <td th:text="${p.id}"></td>
        <td th:text="${p.name}"></td>
        <td th:text="${p.category}"></td>
        <td th:text="${p.value}"></td>
        <td th:text="${p.stock}"></td>

        <td>
            <span th:text="${p.stock > 0 ? 'IN STOCK' : 'OUT OF STOCK'}"
                  th:style="${p.stock > 0}
                    ? 'color:green;font-weight:bold;'
                    : 'color:red;font-weight:bold;'">
            </span>
        </td>

        <td>
            <a th:href="@{'/products/' + ${p.id}}">ğŸ” Detalii</a> |
            <a th:href="@{'/products/' + ${p.id} + '/edit'}">âœï¸ EditeazÄƒ</a> |
            <form th:action="@{'/products/' + ${p.id} + '/delete'}"
                  method="post"
                  style="display:inline;">
                <button type="submit"
                        onclick="return confirm('EÈ™ti sigur cÄƒ vrei sÄƒ È™tergi acest produs?');">
                    ğŸ—‘ È˜terge
                </button>
            </form>
        </td>
    </tr>
    </tbody>
</table>

</body>
</html>
